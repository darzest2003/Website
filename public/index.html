
<!doctype html>
<html lang="en">  
<head>  
  <meta charset="utf-8" />  
  <!-- ‚úÖ Security & Privacy Meta Tags -->
<meta http-equiv="X-Content-Type-Options" content="nosniff">
<meta http-equiv="X-Frame-Options" content="DENY">
<meta http-equiv="Referrer-Policy" content="no-referrer">
<meta http-equiv="Permissions-Policy" content="geolocation=(), microphone=(), camera=(), payment=()">

<!-- ‚úÖ Strong Content Security Policy -->
<meta http-equiv="Content-Security-Policy"
  content="
    default-src 'self' https:;
    script-src 'self' https://cdn.jsdelivr.net https://cdnjs.cloudflare.com 'unsafe-inline';
    style-src 'self' 'unsafe-inline' https:;
    img-src 'self' https: data:;
    connect-src 'self' https://cppbackened.onrender.com;
    font-src 'self' https: data:;
    object-src 'none';
    frame-ancestors 'none';
    base-uri 'self';
    form-action 'self' https://wa.me;
  ">
  <meta name="viewport" content="width=device-width,initial-scale=1" />  
  <title>ONLINETRADERZ ‚Äî Shop</title>  
  <meta name="description" content="ONLINETRADERZ ‚Äî modern storefront" />    
  <link rel="stylesheet" href="style.css">
</head>  

<body class="theme-grey">  

  <!-- Sidebar Toggle Button (Top Left) -->
<button class="menu-toggle" id="menuToggle">
  ‚ò∞
</button>

<!-- Sidebar Menu -->
<aside class="sidebar" id="sidebar">
  <div class="sidebar-header">
    <h3>Categories</h3>
    <button class="close-sidebar" id="closeSidebar">‚úï</button>
  </div>
  <ul class="category-list">
    <li data-category="car-accessories">Car Accessories</li>
    <li data-category="lights">Lights</li>
    <li data-category="car-cleaner">Car Cleaner</li>
    <li data-category="shirts">Shirts</li>
    <li data-category="winter-collections">Winter Collections</li>
    <li data-category="jewelry-items">Jewelry Items</li>
    <li data-category="body-mists">Body Mists</li>
  </ul>
</aside>
  <header class="site-header">
    <nav class="nav">
      <div class="brand">
        <div class="brand-logo">OZ</div>
        ONLINETRADERZ
      </div>
      <div class="nav-links">
        <a href="#">Home</a>
        <a href="#">Shop</a>
        <a href="#">About</a>
        <a href="#">Contact</a>
      </div>
      <div class="nav-actions">
        <button class="theme-toggle">üåô</button>
        <button class="cart-btn">üõí Cart <span class="cart-count">0</span></button>
      </div>
    </nav>
  </header>

  <main class="page">
    <section class="hero">
      <h1>Welcome to ONLINETRADERZ</h1>
      <p>Shop with elegance.</p>
    </section>

    <section class="lock-banner">
      <div class="lock-content">
        <img src="https://cdn-icons-png.flaticon.com/512/3062/3062634.png" alt="Secure Shopping" class="lock-icon">
        <h2>Cash on Delivery Available</h2>
        <p>Shop securely with confidence ‚Äî your orders are safe and delivered right to your doorstep.</p>
        <div class="banner-images">
          <img src="images/Banner1.jpg" alt="Cash on Delivery Banner">
          <img src="images/Banner2.jpg" alt="Truck Delivery Banner">
          <img src="images/Banner3.jpg" alt="Boy Receiving Parcel">
        </div>
      </div>
    </section>

    <div class="tools">
      <div class="search">
        <input type="text" placeholder="Search products..." />
      </div>
      <div class="filter">Filter</div>
    </div>

  </main>

  <footer class="footer">
    &copy; 2025 ONLINETRADERZ. All Rights Reserved.
    <br><br>
    <a href="mailto:farisdaar107@gmail.com" class="footer-email" target="_blank">
      <img src="https://cdn-icons-png.flaticon.com/512/561/561127.png" alt="Email Icon">
      farisdaar107@gmail.com
    </a>
  </footer>

  <!-- Floating WhatsApp Button -->
  <a href="https://wa.me/923444318078" class="whatsapp-float" target="_blank" aria-label="Chat on WhatsApp">
    <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="WhatsApp" />
  </a>

  <!-- Product Loader Script -->
  <script>
  const API_BASE = "https://cppbackened.onrender.com";

  async function loadProducts() {
    try {
      const res = await fetch(`${API_BASE}/api/products`);
      const products = await res.json();
      displayProducts(products);
    } catch (err) {
      console.error("Error loading products:", err);
    }
  }

  function displayProducts(products) {
    const grid = document.createElement("div");
    grid.className = "grid";
  
    products.forEach(p => {
      const card = document.createElement("div");
      card.className = "card";
      card.innerHTML = `
        <img src="${p.img}" alt="${p.title}">
        <h3>${p.title}</h3>
        <div class="meta">
          <div class="price">Rs.${p.price}</div>
          <div class="stock">${p.stock > 0 ? 'In Stock' : 'Out of Stock'}</div>
        </div>
        <div class="actions">
          <button class="btn btn-primary add-cart-btn">Add to Cart</button>
          <button class="btn btn-outline">View</button>
        </div>
      `;
      grid.appendChild(card);

      card.querySelector(".add-cart-btn").addEventListener("click", () => {
        addToCart(p);
      });
    });
  
    document.querySelector(".page").appendChild(grid);
  }

  loadProducts();
  </script>

  <script>
function setupQuickView(products) {
  document.querySelectorAll('.btn-outline').forEach((btn, index) => {
    btn.addEventListener('click', () => {
      const p = products[index];

      // Create modal
      const modal = document.createElement('div');
      modal.className = 'quickview-modal';
      modal.innerHTML = `
        <div class="quickview-card">
          <button class="close-view">‚úñ</button>
          <img src="${p.img}" alt="${p.title}">
          <h2>${p.title}</h2>
          <p class="price">Rs.${p.price}</p>
          <p class="stock">${p.stock > 0 ? '‚úÖ In Stock' : '‚ùå Out of Stock'}</p>
          <p class="desc">${p.desc || 'No description available.'}</p>
          <div class="actions">
            <button class="btn btn-primary">Add to Cart</button>
            <button class="btn btn-outline">Close</button>
          </div>
        </div>
      `;

      document.body.appendChild(modal);

      // Close modal
      modal.querySelector('.close-view').addEventListener('click', () => modal.remove());
      modal.querySelector('.btn-outline').addEventListener('click', () => modal.remove());

      // Add to cart button
      modal.querySelector('.btn-primary').addEventListener('click', () => {
        addToCart(p);
        modal.remove();
      });
    });
  });
}
function displayProducts(products) {
  const grid = document.createElement("div");
  grid.className = "grid";

  products.forEach(p => {
    const card = document.createElement("div");
    card.className = "card";
    card.setAttribute("data-category", p.category || "all");

    // Add badge if product has tag
    let badgeHTML = "";
    if (p.badge) { // p.badge can be "sale", "new", or "hot"
      badgeHTML = `<div class="badge ${p.badge}">${p.badge}</div>`;
    }

    card.innerHTML = `
      ${badgeHTML}
      <img src="${p.img}" alt="${p.title}">
      <h3>${p.title}</h3>
      <div class="meta">
        <div class="price">Rs.${p.price}</div>
        <div class="stock">${p.stock > 0 ? 'In Stock' : 'Out of Stock'}</div>
      </div>
      <div class="actions">
        <button class="btn btn-primary add-cart-btn">Add to Cart</button>
        <button class="btn btn-outline">View</button>
      </div>
    `;

    grid.appendChild(card);

    card.querySelector(".add-cart-btn").addEventListener("click", () => {
      addToCart(p);
    });
  });

  document.querySelector(".page").appendChild(grid);
  setupQuickView(products);
}
  </script>

  <!-- üõí Cart Sidebar -->
  <div class="cart-sidebar" id="cartSidebar">
    <div class="cart-header">
      <h3>Your Cart</h3>
      <button id="closeCart">‚úñ</button>
    </div>
    <div id="cartItems"></div>
    <div class="cart-footer">
      <p>Total: Rs.<span id="cartTotal">0</span></p>
      <button class="checkout-btn">Checkout</button>
    </div>
  </div>

  <!-- üõí Cart Management Script -->
  <script>
  let cart = JSON.parse(localStorage.getItem("cart")) || [];

  function updateCartCount() {
    document.querySelector(".cart-count").textContent = cart.length;
  }

  function saveCart() {
    localStorage.setItem("cart", JSON.stringify(cart));
    updateCartCount();
    renderCartItems();
  }

  function addToCart(product) {
    const existing = cart.find(item => item.id === product.id);
    if (existing) {
      existing.quantity += 1;
    } else {
      product.quantity = 1;
      cart.push(product);
    }
    saveCart();
    alert(`${product.title} added to cart!`);
  }

  function changeQuantity(index, delta) {
    cart[index].quantity += delta;
    if (cart[index].quantity <= 0) cart.splice(index, 1);
    saveCart();
  }

  function renderCartItems() {
    const cartContainer = document.getElementById("cartItems");
    const total = document.getElementById("cartTotal");
    cartContainer.innerHTML = "";
    let sum = 0;
    
    cart.forEach((item, i) => {
      const div = document.createElement("div");
      div.className = "cart-item";
      div.innerHTML = `
        <img src="${item.img}" alt="${item.title}">
        <div class="cart-item-details">
          <h4>${item.title}</h4>
          <p>Rs.${item.price}</p>
          <div class="qty-control">
            <button onclick="changeQuantity(${i}, -1)">‚ûñ</button>
            <span>${item.quantity}</span>
            <button onclick="changeQuantity(${i}, 1)">‚ûï</button>
          </div>
        </div>
        <button class="remove-btn" onclick="removeFromCart(${i})">üóëÔ∏è</button>
      `;
      cartContainer.appendChild(div);
      sum += item.price * item.quantity;
    });

    total.textContent = sum;
  }

  function removeFromCart(index) {
    cart.splice(index, 1);
    saveCart();
  }

  document.querySelector(".cart-btn").addEventListener("click", () => {
    document.getElementById("cartSidebar").classList.add("active");
  });

  document.getElementById("closeCart").addEventListener("click", () => {
    document.getElementById("cartSidebar").classList.remove("active");
  });

  // üßæ Checkout Form Modal (Corrected Integration)
  document.querySelector(".checkout-btn").addEventListener("click", () => {
    const modal = document.createElement("div");
    modal.className = "checkout-modal";
    modal.innerHTML = 
<div class="checkout-modal" id="checkoutModal" style="display:none;">
  <div class="checkout-form">

    <h2>üõí Complete Your Order</h2>
    <p class="checkout-sub">Please fill the details below</p>

    <form id="orderForm">

      <div class="form-group">
        <label>Full Name</label>
        <input type="text" name="name" required placeholder="John Doe">
      </div>

      <div class="form-group">
        <label>Phone Number</label>
        <input type="tel" name="phone" required placeholder="03XXXXXXXXX">
      </div>

      <div class="form-group">
        <label>Email (optional)</label>
        <input type="email" name="email" placeholder="example@email.com">
      </div>

      <div class="form-group">
        <label>Delivery Address</label>
        <textarea name="address" required placeholder="House no, street, city"></textarea>
      </div>

      <div class="form-group">
        <label>Payment Method</label>
        <select name="payment" required>
          <option value="">Select payment method</option>
          <option value="cod">Cash on Delivery</option>
          <option value="bank">Bank Transfer</option>
          <option value="easypaisa">EasyPaisa</option>
          <option value="jazzcash">JazzCash</option>
        </select>
      </div>

      <button type="submit" class="checkout-btn">Place Order</button>
    </form>

    <button class="btn btn-outline" onclick="closeCheckout()">Cancel</button>
  </div>
</div>
    `;

    document.body.appendChild(modal);

    // close button
    modal.querySelector(".close-checkout").addEventListener("click", () => {
      modal.remove();
    });

    // submit button
    modal.querySelector("#submitOrder").addEventListener("click", () => {
      const name = document.getElementById("custName").value.trim();
      const email = document.getElementById("custEmail").value.trim();
      const contact = document.getElementById("custContact").value.trim();
      const address = document.getElementById("custAddress").value.trim();
      if (!name || !email || !contact || !address) {
        alert("Please fill all details");
        return;
      }

      const orderId = "OZ" + Math.floor(100000 + Math.random() * 900000);
      const total = document.getElementById("cartTotal").textContent;
      modal.remove();

      const popup = document.createElement("div");
      popup.className = "thank-popup";
      popup.innerHTML = `
        <!-- ORDER SUCCESS POPUP -->
<div class="thank-popup" id="thankPopup" style="display:none;">
  <div class="thank-card">
    <h2>üéâ Order Successful!</h2>
    <p>Your order has been placed successfully.</p>
    <p class="redirect-text">Redirecting to home page in <span id="countdown">10</span> seconds...</p>
  </div>
</div>
      `;
      document.body.appendChild(popup);

      const msg = encodeURIComponent(
        `Hello ${name}! üëã Your order (${orderId}) has been placed successfully.\n\nTotal: Rs.${total}\nAddress: ${address}\nThank you for shopping at ONLINETRADERZ!`
      );
      window.open(`https://wa.me/${contact}?text=${msg}`, "_blank");

      setTimeout(() => {
        popup.remove();
        localStorage.removeItem("cart");
        window.location.href = "index.html";
      }, 5000);
    });
  });

  updateCartCount();
  renderCartItems();
  </script>

  <script>
  const menuToggle = document.getElementById('menuToggle');
  const sidebar = document.getElementById('sidebar');
  const closeSidebar = document.getElementById('closeSidebar');
  const categoryItems = document.querySelectorAll('.category-list li');
  const productCards = document.querySelectorAll('.card');

  menuToggle.addEventListener('click', () => {
    sidebar.classList.add('active');
  });

  closeSidebar.addEventListener('click', () => {
    sidebar.classList.remove('active');
  });

  categoryItems.forEach(item => {
    item.addEventListener('click', () => {
      const selected = item.getAttribute('data-category');

      // Filter products by category
      productCards.forEach(card => {
        const category = card.getAttribute('data-category');
        card.style.display = (selected === category || selected === 'all') ? 'flex' : 'none';
      });

      sidebar.classList.remove('active');
    });
  });
  </script>

  <script>
  // üîç Search functionality
  const searchInput = document.querySelector('.search input');

  // Wait for products to load
  function attachSearchListener() {
    const allProducts = document.querySelectorAll('.card');

    if (!allProducts.length) {
      // Retry until products are loaded
      setTimeout(attachSearchListener, 500);
      return;
    }

    searchInput.addEventListener('input', () => {
      const query = searchInput.value.trim().toLowerCase();

      allProducts.forEach(card => {
        const title = card.querySelector('h3').textContent.toLowerCase();
        card.style.display = title.includes(query) ? 'flex' : 'none';
      });
    });
  }

  attachSearchListener();

    //new//

document.addEventListener("DOMContentLoaded", () => {

  // Show a small toast instead of alert
  function showToast(msg) {
    const t = document.createElement("div");
    t.className = "toast";
    t.textContent = msg;
    Object.assign(t.style, {
      position: "fixed",
      bottom: "20px",
      left: "50%",
      transform: "translateX(-50%)",
      background: "#333",
      color: "#fff",
      padding: "10px 20px",
      borderRadius: "5px",
      zIndex: 9999,
      opacity: 0,
      transition: "opacity 0.3s"
    });
    document.body.appendChild(t);
    requestAnimationFrame(() => t.style.opacity = 1);
    setTimeout(() => {
      t.style.opacity = 0;
      setTimeout(() => t.remove(), 300);
    }, 2000);
  }

  // Replace alert() in your addToCart function:
  const originalAddToCart = window.addToCart;
  window.addToCart = function(product) {
    const existing = cart.find(item => item.id === product.id);
    if (existing) existing.quantity += 1;
    else {
      product.quantity = 1;
      cart.push(product);
    }
    saveCart();
    showToast(`${product.title} added to cart!`);
  }

  // Ensure products load after DOM is ready
  loadProducts();
  updateCartCount();
  renderCartItems();
});

    // ‚úÖ Initialize filters and search after products are loaded
function initFiltersAndSearch() {
  const productCards = document.querySelectorAll('.card');
  const categoryItems = document.querySelectorAll('.category-list li');
  const searchInput = document.querySelector('.search input');

  // Category filter
  categoryItems.forEach(item => {
    item.addEventListener('click', () => {
      const selected = item.getAttribute('data-category');
      productCards.forEach(card => {
        const category = card.getAttribute('data-category');
        card.style.display = (selected === category || selected === 'all') ? 'flex' : 'none';
      });
    });
  });

  // Search filter
  searchInput.addEventListener('input', () => {
    const query = searchInput.value.trim().toLowerCase();
    productCards.forEach(card => {
      const title = card.querySelector('h3').textContent.toLowerCase();
      card.style.display = title.includes(query) ? 'flex' : 'none';
    });
  });
}

// Wait a bit to ensure products are loaded, then initialize
setTimeout(initFiltersAndSearch, 500);

    //need to remove //
    <script>
// ‚úÖ Small toast for add-to-cart instead of alert
function showToast(msg) {
  const t = document.createElement("div");
  t.className = "toast";
  t.textContent = msg;
  Object.assign(t.style, {
    position: "fixed",
    bottom: "20px",
    left: "50%",
    transform: "translateX(-50%)",
    background: "#333",
    color: "#fff",
    padding: "10px 20px",
    borderRadius: "5px",
    zIndex: 9999,
    opacity: 0,
    transition: "opacity 0.3s"
  });
  document.body.appendChild(t);
  requestAnimationFrame(() => t.style.opacity = 1);
  setTimeout(() => {
    t.style.opacity = 0;
    setTimeout(() => t.remove(), 300);
  }, 2000);
}

// ‚úÖ Override addToCart to use toast
const originalAddToCart = window.addToCart;
window.addToCart = function(product) {
  const existing = cart.find(item => item.id === product.id);
  if (existing) existing.quantity += 1;
  else {
    product.quantity = 1;
    cart.push(product);
  }
  saveCart();
  showToast(`${product.title} added to cart!`);
};

// ‚úÖ Initialize filters and search after products load
function initFiltersAndSearch() {
  const productCards = document.querySelectorAll('.card');
  const categoryItems = document.querySelectorAll('.category-list li');
  const searchInput = document.querySelector('.search input');

  if (!productCards.length) {
    setTimeout(initFiltersAndSearch, 300);
    return;
  }

  // Category filter
  categoryItems.forEach(item => {
    item.addEventListener('click', () => {
      const selected = item.getAttribute('data-category');
      productCards.forEach(card => {
        const category = card.getAttribute('data-category');
        card.style.display = (selected === category || selected === 'all') ? 'flex' : 'none';
      });
    });
  });

  // Search filter
  searchInput.addEventListener('input', () => {
    const query = searchInput.value.trim().toLowerCase();
    productCards.forEach(card => {
      const title = card.querySelector('h3').textContent.toLowerCase();
      card.style.display = title.includes(query) ? 'flex' : 'none';
    });
  });
}

// ‚úÖ Start after DOM is ready
document.addEventListener("DOMContentLoaded", () => {
  loadProducts();
  updateCartCount();
  renderCartItems();
  initFiltersAndSearch();
});
    <script>
document.addEventListener("DOMContentLoaded", () => {
  const cartBtn = document.querySelector(".cart-btn");
  const cartSidebar = document.getElementById("cartSidebar");
  const closeCart = document.getElementById("closeCart");

  // Open cart
  cartBtn.addEventListener("click", () => {
    cartSidebar.classList.add("active");
  });

  // Close cart
  closeCart.addEventListener("click", () => {
    cartSidebar.classList.remove("active");
  });

  // Ensure cart count and items are correct
  if (!window.cart) window.cart = JSON.parse(localStorage.getItem("cart")) || [];
  updateCartCount();
  renderCartItems();
});
</script>
</script>
  </script>

</body>   
</html>
