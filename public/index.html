<!doctype html>
<html lang="en">  
<head>  
  <meta charset="utf-8" />  
  <!-- ‚úÖ Security & Privacy Meta Tags -->
<meta http-equiv="X-Content-Type-Options" content="nosniff">
<meta http-equiv="X-Frame-Options" content="DENY">
<meta http-equiv="Referrer-Policy" content="no-referrer">
<meta http-equiv="Permissions-Policy" content="geolocation=(), microphone=(), camera=(), payment=()">

<!-- ‚úÖ Strong Content Security Policy -->
<meta http-equiv="Content-Security-Policy"
  content="
    default-src 'self' https:;
    script-src 'self' https://cdn.jsdelivr.net https://cdnjs.cloudflare.com 'unsafe-inline';
    style-src 'self' 'unsafe-inline' https:;
    img-src 'self' https: data:;
    connect-src 'self' https://cppbackened.onrender.com;
    font-src 'self' https: data:;
    object-src 'none';
    frame-ancestors 'none';
    base-uri 'self';
    form-action 'self' https://wa.me;
  ">
  <meta name="viewport" content="width=device-width,initial-scale=1" />  
  <title>ONLINETRADERZ ‚Äî Shop</title>  
  <meta name="description" content="ONLINETRADERZ ‚Äî modern storefront" />    
  <link rel="stylesheet" href="style.css">
</head>  

<body class="theme-grey">  

  <!-- Sidebar Toggle Button (Top Left) -->
<button class="menu-toggle" id="menuToggle">
  ‚ò∞
</button>

<!-- Sidebar Menu -->
<aside class="sidebar" id="sidebar">
  <div class="sidebar-header">
    <h3>Categories</h3>
    <button class="close-sidebar" id="closeSidebar">‚úï</button>
  </div>
  <ul class="category-list">
    <li data-category="car-accessories">Car Accessories</li>
    <li data-category="lights">Lights</li>
    <li data-category="car-cleaner">Car Cleaner</li>
    <li data-category="shirts">Shirts</li>
    <li data-category="winter-collections">Winter Collections</li>
    <li data-category="jewelry-items">Jewelry Items</li>
    <li data-category="body-mists">Body Mists</li>
  </ul>
</aside>
  <header class="site-header">
    <nav class="nav">
      <div class="brand">
        <div class="brand-logo">OZ</div>
        ONLINETRADERZ
      </div>
      <div class="nav-links">
        <a href="#">Home</a>
        <a href="#">Shop</a>
        <a href="#">About</a>
        <a href="#">Contact</a>
      </div>
      <div class="nav-actions">
        <button class="theme-toggle">üåô</button>
        <button class="cart-btn">üõí Cart <span class="cart-count">0</span></button>
      </div>
    </nav>
  </header>

  <main class="page">
    <section class="hero">
      <h1>Welcome to ONLINETRADERZ</h1>
      <p>Shop with elegance.</p>
    </section>

    <section class="lock-banner">
      <div class="lock-content">
        <img src="https://cdn-icons-png.flaticon.com/512/3062/3062634.png" alt="Secure Shopping" class="lock-icon">
        <h2>Cash on Delivery Available</h2>
        <p>Shop securely with confidence ‚Äî your orders are safe and delivered right to your doorstep.</p>
        <div class="banner-images">
          <img src="images/Banner1.jpg" alt="Cash on Delivery Banner">
          <img src="images/Banner2.jpg" alt="Truck Delivery Banner">
      <img src="images/Banner3.jpg" alt="Boy Receiving Parcel"> 
        </div>
      </div>
    </section>

    <div class="tools">
      <div class="search">
        <input type="text" placeholder="Search products..." />
      </div>
      <div class="filter">Filter</div>
    </div>

  </main>

  <footer class="footer">
    &copy; 2025 ONLINETRADERZ. All Rights Reserved.
    <br><br>
    <a href="mailto:farisdaar107@gmail.com" class="footer-email" target="_blank">
      <img src="https://cdn-icons-png.flaticon.com/512/561/561127.png" alt="Email Icon">
      farisdaar107@gmail.com
    </a>
  </footer>

  <!-- Floating WhatsApp Button -->
  <a href="https://wa.me/923444318078" class="whatsapp-float" target="_blank" aria-label="Chat on WhatsApp">
    <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="WhatsApp" />
    
  </a>

   <!-- üõí Cart Sidebar -->
  <div class="cart-sidebar" id="cartSidebar">
    <div class="cart-header">
      <h3>Your Cart</h3>
      <button id="closeCart">‚úñ</button>
    </div>
    <div id="cartItems"></div>
    <div class="cart-footer">
      <p>Total: Rs.<span id="cartTotal">0</span></p>
      <button class="checkout-btn">Checkout</button>
    </div>
  </div>


<script>
const API_BASE = "https://cppbackened.onrender.com";
let cart = JSON.parse(localStorage.getItem("cart")) || [];

// Cart functions
function updateCartCount() { document.querySelector(".cart-count").textContent = cart.length; }
function saveCart() { localStorage.setItem("cart", JSON.stringify(cart)); updateCartCount(); renderCartItems(); }
function addToCart(p) { if(p.stock<=0){alert("Out of stock!"); return;} const e = cart.find(i=>i.id===p.id); if(e){e.quantity++}else{p.quantity=1; cart.push(p);} saveCart(); alert(`${p.title} added!`); }
function changeQuantity(i,d){cart[i].quantity+=d;if(cart[i].quantity<=0)cart.splice(i,1);saveCart();}
function removeFromCart(i){cart.splice(i,1);saveCart();}
function renderCartItems(){ const container=document.getElementById("cartItems"); const total=document.getElementById("cartTotal"); container.innerHTML=""; let sum=0; cart.forEach((item,i)=>{ const div=document.createElement("div"); div.className="cart-item"; div.innerHTML=`<img src="${item.img}" alt="${item.title}"><div class="cart-item-details"><h4>${item.title}</h4><p>Rs.${item.price}</p><div class="qty-control"><button onclick="changeQuantity(${i},-1)">‚ûñ</button><span>${item.quantity}</span><button onclick="changeQuantity(${i},1)">‚ûï</button></div></div><button class="remove-btn" onclick="removeFromCart(${i})">üóëÔ∏è</button>`; container.appendChild(div); sum+=item.price*item.quantity; }); total.textContent=sum; }

document.querySelector(".cart-btn").addEventListener("click",()=>document.getElementById("cartSidebar").classList.add("active"));
document.getElementById("closeCart").addEventListener("click",()=>document.getElementById("cartSidebar").classList.remove("active"));
updateCartCount(); renderCartItems();

// Load Products
async function loadProducts(){
  try{
    const res=await fetch(`${API_BASE}/api/products`);
    const products=await res.json();
    displayProducts(products);
  }catch(err){console.error(err);}
}

// Display Products
function displayProducts(products){
  const grid=document.createElement("div"); grid.className="grid";
  products.forEach(p=>{
    const card=document.createElement("div"); card.className="card"; card.setAttribute("data-category",p.category||"all");
    const badgeHTML=p.badge?`<div class="badge ${p.badge}">${p.badge}</div>`:"";
    card.innerHTML=`${badgeHTML}<img src="${p.img}" alt="${p.title}"><h3>${p.title}</h3><div class="meta"><div class="price">Rs.${p.price}</div><div class="stock ${p.stock>0?'in':'out'}">${p.stock>0?'In Stock':'Out of Stock'}</div></div><div class="actions"><button class="btn btn-primary add-cart-btn">Add to Cart</button><button class="btn btn-outline">View</button></div>`;
    grid.appendChild(card);
    card.querySelector(".add-cart-btn").addEventListener("click",()=>addToCart(p));
  });
  document.querySelector(".page").appendChild(grid);
  setupQuickView(products);
}

// Quick View
function setupQuickView(products){
  document.querySelectorAll('.btn-outline').forEach((btn,index)=>{
    btn.addEventListener('click',()=>{
      const p=products[index];
      const modal=document.createElement('div'); modal.className='quickview-modal';
      modal.innerHTML=`<div class="quickview-card"><button class="close-view">‚úñ</button><img src="${p.img}" alt="${p.title}"><h2>${p.title}</h2><p class="price">Rs.${p.price}</p><p class="stock">${p.stock>0?'‚úÖ In Stock':'‚ùå Out of Stock'}</p><p class="desc">${p.desc||'No description available.'}</p><div class="actions"><button class="btn btn-primary">Add to Cart</button><button class="btn btn-outline">Close</button></div></div>`;
      document.body.appendChild(modal);
      modal.querySelector('.close-view').addEventListener('click',()=>modal.remove());
      modal.querySelector('.btn-outline').addEventListener('click',()=>modal.remove());
      modal.querySelector('.btn-primary').addEventListener('click',()=>{ addToCart(p); modal.remove(); });
    });
  });
}

// Sidebar & Search
document.getElementById('menuToggle').addEventListener('click',()=>document.getElementById('sidebar').classList.add('active'));
document.getElementById('closeSidebar').addEventListener('click',()=>document.getElementById('sidebar').classList.remove('active'));
document.querySelectorAll('.category-list li').forEach(item=>item.addEventListener('click',()=>{ const sel=item.getAttribute('data-category'); document.querySelectorAll('.card').forEach(c=>{ c.style.display=(sel===c.getAttribute('data-category')||sel==='all')?'flex':'none'; }); document.getElementById('sidebar').classList.remove('active'); }));
document.querySelector('.search input').addEventListener('input',e=>{ const q=e.target.value.toLowerCase(); document.querySelectorAll('.card').forEach(c=>{ c.style.display=c.querySelector('h3').textContent.toLowerCase().includes(q)?'flex':'none'; }); });

// Theme toggle
document.querySelector('.theme-toggle').addEventListener('click',()=>{ document.body.classList.toggle('theme-dark'); document.body.classList.toggle('theme-grey'); });

loadProducts();
window.addEventListener('beforeunload',saveCart);
</script>


</body>   
</html>
