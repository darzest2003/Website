<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ONLINETRADERZ â€” Shop</title>

<style>
/* ------------------------------
   THEME VARIABLES
--------------------------------*/
:root{
  --accent:#25D366;
  --blue-accent:#3B82F6;
  --page-bg:#f7f9fc;
  --card-bg:#ffffff;
  --text-color:#0f172a;
  --muted:#6b7280;
  --radius:14px;
  --shadow:0 8px 28px rgba(2,6,23,0.08);
  --transition: all .25s ease;
}
body.light{
  --accent:#25D366;
  --page-bg:#f7f9fc;
  --card-bg:#ffffff;
  --text-color:#0f172a;
}
body.blue{
  --accent:var(--blue-accent);
  --page-bg:#f0f6ff;
  --card-bg:#ffffff;
  --text-color:#0a2247;
}

/* ------------------------------
   BASE RESET
--------------------------------*/
*{box-sizing:border-box;margin:0;padding:0;}
html,body{height:100%;}
body{
  font-family: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  background:var(--page-bg);
  color:var(--text-color);
  -webkit-font-smoothing: antialiased;
  line-height:1.5;
  transition:var(--transition);
}

/* CONTAINERS */
.wrap{max-width:1200px;margin:auto;padding:0 16px;}
h1,h2,h3{font-weight:700;}

/* ------------------------------
   HEADER
--------------------------------*/
header{
  position:sticky;top:0;z-index:50;
  background:rgba(255,255,255,0.85);
  backdrop-filter: blur(6px);
  border-bottom:1px solid rgba(2,6,23,0.06);
  transition:var(--transition);
}
.hdr-inner{
  display:flex;align-items:center;justify-content:space-between;
  padding:10px 16px;max-width:1200px;margin:auto;
}
.logo{font-weight:800;font-size:1.3rem;color:var(--text-color);}
nav a{
  text-decoration:none;color:var(--text-color);
  margin:0 10px;font-weight:600;
  padding:6px 10px;border-radius:8px;transition:var(--transition);
}
nav a:hover{background:rgba(59,130,246,0.08);}
.controls{display:flex;align-items:center;gap:8px;}
.theme-switch button{
  border:0;background:transparent;cursor:pointer;
  padding:6px 8px;border-radius:8px;font-weight:600;
}
.cart-btn{
  position:relative;background:var(--accent);color:#fff;
  padding:8px 14px;border:none;border-radius:10px;cursor:pointer;font-weight:700;
  transition:var(--transition);
}
.cart-btn:hover{filter:brightness(1.05);}
.cart-count{
  position:absolute;top:-6px;right:-8px;background:#05204A;color:#fff;
  border-radius:50%;padding:3px 7px;font-size:12px;
}

/* ------------------------------
   HERO
--------------------------------*/
.hero{
  display:flex;align-items:center;justify-content:space-between;
  margin:24px 0;padding:32px;border-radius:18px;
  background:linear-gradient(135deg,#ffffff 0%,#e7f1ff 100%);
  box-shadow:var(--shadow);
  flex-wrap:wrap;gap:24px;
}
.hero h1{font-size:clamp(22px,3vw,36px);}
.hero p{color:var(--muted);margin-top:10px;max-width:500px;}
.hero-cta{display:flex;gap:12px;margin-top:16px;}
.btn-primary{
  background:var(--accent);color:#fff;
  padding:10px 18px;border:none;border-radius:10px;cursor:pointer;
  font-weight:700;transition:var(--transition);
}
.btn-primary:hover{filter:brightness(1.1);}
.btn-ghost{
  background:transparent;border:1px solid rgba(2,6,23,0.1);
  padding:10px 18px;border-radius:10px;cursor:pointer;font-weight:600;
  transition:var(--transition);
}
.btn-ghost:hover{background:rgba(2,6,23,0.05);}
.hero-right img{
  width:280px;border-radius:14px;box-shadow:0 10px 40px rgba(2,6,23,0.08);
  transition:transform .4s ease;
}
.hero-right img:hover{transform:scale(1.05);}

/* ------------------------------
   PRODUCT GRID
--------------------------------*/
.products-grid{
  display:grid;gap:20px;margin-top:20px;
  grid-template-columns:repeat(auto-fill,minmax(240px,1fr));
}
.card{
  background:var(--card-bg);border-radius:var(--radius);
  box-shadow:var(--shadow);padding:14px;display:flex;flex-direction:column;
  transition:transform .18s ease,box-shadow .18s ease;
}
.card:hover{transform:translateY(-5px);box-shadow:0 14px 32px rgba(2,6,23,0.1);}
.img-wrap{
  height:180px;border-radius:10px;overflow:hidden;display:flex;
  align-items:center;justify-content:center;background:#f9fafb;
}
.img-wrap img{
  width:100%;height:100%;object-fit:contain;
  transition:opacity .5s ease;opacity:0;
}
.img-wrap img.loaded{opacity:1;}
.card h3{margin:10px 0 4px;font-size:1rem;}
.price{font-weight:800;margin-bottom:6px;color:var(--text-color);}
.desc{font-size:14px;color:var(--muted);margin-bottom:10px;}
.card .actions{display:flex;gap:10px;margin-top:auto;}
.add-btn{background:var(--accent);color:#fff;border:none;border-radius:8px;padding:8px;cursor:pointer;}
.wa-btn{background:#075e54;color:#fff;border:none;border-radius:8px;padding:8px;cursor:pointer;}

/* ------------------------------
   ORDER FORM INLINE
--------------------------------*/
.order-inline{
  border-top:1px solid rgba(2,6,23,0.05);
  margin-top:10px;padding-top:10px;
  display:none;flex-direction:column;gap:8px;
}
.order-inline input, .order-inline textarea{
  padding:8px;border-radius:8px;border:1px solid #e5e7eb;
  width:100%;font-size:14px;
}
.order-inline button{
  background:var(--accent);color:#fff;border:none;border-radius:8px;
  padding:8px;font-weight:600;cursor:pointer;
}
.show-inline .order-inline{display:flex;}

/* ------------------------------
   FOOTER
--------------------------------*/
footer{
  text-align:center;margin:40px 0;padding:20px;background:#fff;
  border-radius:14px;box-shadow:var(--shadow);color:var(--muted);
}
footer a{color:var(--accent);text-decoration:none;font-weight:600;}

/* ------------------------------
   FLOATING WHATSAPP
--------------------------------*/
.whatsapp-float{
  position:fixed;bottom:22px;right:22px;z-index:100;
}
.whatsapp-float a{
  display:flex;align-items:center;justify-content:center;
  background:var(--accent);color:#fff;width:54px;height:54px;
  border-radius:50%;box-shadow:0 6px 16px rgba(37,211,102,0.3);
  font-size:26px;text-decoration:none;transition:transform .2s;
}
.whatsapp-float a:hover{transform:scale(1.05);}

/* ------------------------------
   RESPONSIVE
--------------------------------*/
@media(max-width:700px){
  .hero{padding:22px;}
  .hero-right{display:none;}
}
</style>
</head>

<body class="light">

<header>
  <div class="hdr-inner">
    <div class="logo">ONLINETRADERZ</div>
    <nav>
      <a href="#">Home</a>
      <a href="#shop">Shop</a>
      <a href="#contact">Contact</a>
      <a href="#about">About</a>
    </nav>
    <div class="controls">
      <div class="theme-switch">
        <button onclick="setTheme('light')">Light</button>
        <button onclick="setTheme('blue')">Blue</button>
      </div>
      <button class="cart-btn" onclick="openCart()">Cart <span id="cartCount" class="cart-count">0</span></button>
    </div>
  </div>
</header>

<main class="wrap">
  <section class="hero">
    <div class="hero-left">
      <h1>Welcome to ONLINETRADERZ</h1>
      <p>Handpicked products, reliable delivery and unbeatable prices. Start shopping now!</p>
      <div class="hero-cta">
        <button class="btn-primary" onclick="scrollToProducts()">Shop Now</button>
        <button class="btn-ghost" onclick="openCart()">View Cart</button>
      </div>
    </div>
    <div class="hero-right">
      <img src="https://via.placeholder.com/280x200?text=Featured+Product" alt="featured">
    </div>
  </section>

  <section id="shop">
    <h2 style="margin:10px 0;">Featured Products</h2>
    <div id="productsGrid" class="products-grid"></div>
  </section>

  <footer id="contact">
    <div>Email: <a href="mailto:farisdaar107@gmail.com">farisdaar107@gmail.com</a></div>
    <div>WhatsApp: <a href="https://wa.me/923444318078" target="_blank">+92 344 4318078</a></div>
    <p style="margin-top:8px;">Â© ONLINETRADERZ 2025 â€” Built with care</p>
  </footer>
</main>

<div class="whatsapp-float">
  <a href="https://wa.me/923444318078" target="_blank" title="Chat on WhatsApp">ðŸ’¬</a>
</div>

<script>
const API_BASE = "https://cppbackened.onrender.com";
let allProducts = [];
let cart = [];

function scrollToProducts(){document.getElementById('shop').scrollIntoView({behavior:'smooth'});}

/* ---------- THEME ----------- */
function setTheme(theme){
  document.body.className = theme;
  localStorage.setItem('theme',theme);
}
(function(){
  const saved = localStorage.getItem('theme');
  if(saved) document.body.className = saved;
})();

/* ---------- PRODUCTS ----------- */
async function loadProducts(){
  try{
    const res = await fetch(API_BASE + "/api/products");
    allProducts = await res.json();
    renderProducts();
  }catch(e){
    console.error(e);
  }
}

function renderProducts(){
  const grid = document.getElementById('productsGrid');
  grid.innerHTML = '';
  allProducts.forEach(p=>{
    const card = document.createElement('div');
    card.className='card';
    const img = document.createElement('img');
    img.loading='lazy';
    img.src=p.img || 'https://via.placeholder.com/300';
    img.alt=p.title||'product';
    img.onload=()=>img.classList.add('loaded');

    card.innerHTML=`
      <div class="img-wrap"></div>
      <h3>${p.title||''}</h3>
      <div class="price">RS.${Number(p.price||0).toFixed(2)}</div>
      <div class="desc">${p.description||''}</div>
      <div class="actions">
        <button class="add-btn">Add to Cart</button>
        <button class="wa-btn">WhatsApp</button>
      </div>
      <div class="order-inline">
        <input placeholder="Full Name" class="name">
        <input placeholder="Contact" class="contact">
        <textarea placeholder="Address" class="address"></textarea>
        <button class="submit-inline">Submit Order</button>
      </div>
    `;
    card.querySelector('.img-wrap').appendChild(img);

    card.querySelector('.add-btn').onclick=()=>addToCart(p);
    card.querySelector('.wa-btn').onclick=()=>window.open(`https://wa.me/923444318078?text=${encodeURIComponent('Interested in '+p.title)}`,'_blank');
    card.querySelector('.submit-inline').onclick=()=>inlineOrder(p,card);
    grid.appendChild(card);
  });
}

/* ---------- CART LOGIC ----------- */
function addToCart(p){
  const existing = cart.find(x=>x.id===p.id);
  if(existing) existing.qty+=1; else cart.push({...p,qty:1});
  updateCart();
}
function updateCart(){
  const count = cart.reduce((a,b)=>a+b.qty,0);
  document.getElementById('cartCount').textContent=count;
}
function openCart(){
  let msg = "Cart Items:\\n";
  cart.forEach(i=>msg+=`${i.title} x${i.qty}\\n`);
  alert(msg + "\\nTotal items: "+cart.length);
}

/* ---------- INLINE ORDER ----------- */
function inlineOrder(p,card){
  const form=card.querySelector('.order-inline');
  form.classList.toggle('show-inline');
  if(!form.classList.contains('show-inline')) return;
  const name=form.querySelector('.name').value.trim();
  const contact=form.querySelector('.contact').value.trim();
  const address=form.querySelector('.address').value.trim();
  if(!name||!contact||!address){alert('Fill all fields');return;}
  const body={products:[{product:p.id,qty:1}],name,contact,address};
  fetch(API_BASE+'/api/orders',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(body)})
    .then(r=>r.text()).then(t=>{
      alert('Order placed! '+t);
      form.classList.remove('show-inline');
    }).catch(e=>alert('Error sending order'));
}

/* ---------- INIT ----------- */
window.addEventListener('load',loadProducts);
</script>
</body>
</html>
