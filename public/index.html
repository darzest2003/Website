<!doctype html>
<html lang="en">  
<head>  
  <meta charset="utf-8" />  
  <meta name="viewport" content="width=device-width,initial-scale=1" />  
  <title>ONLINETRADERZ ‚Äî Shop</title>  
  <meta name="description" content="ONLINETRADERZ ‚Äî modern storefront" />    
  <link rel="stylesheet" href="style.css">
</head>  

<body class="theme-grey">  
  
  <header class="site-header">
    <nav class="nav">
      <div class="brand">
        <div class="brand-logo">OZ</div>
        ONLINETRADERZ
      </div>
      <div class="nav-links">
        <a href="#">Home</a>
        <a href="#">Shop</a>
        <a href="#">About</a>
        <a href="#">Contact</a>
      </div>
      <div class="nav-actions">
        <button class="theme-toggle">üåô</button>
        <button class="cart-btn">üõí Cart <span class="cart-count">0</span></button>
      </div>
    </nav>
  </header>

  <main class="page">
    <section class="hero">
      <h1>Welcome to ONLINETRADERZ</h1>
      <p>Shop with elegance.</p>
    </section>

    <section class="lock-banner">
      <div class="lock-content">
        <img src="https://cdn-icons-png.flaticon.com/512/3062/3062634.png" alt="Secure Shopping" class="lock-icon">
        <h2>Cash on Delivery Available</h2>
        <p>Shop securely with confidence ‚Äî your orders are safe and delivered right to your doorstep.</p>
        <div class="banner-images">
          <img src="images/Banner1.jpg" alt="Cash on Delivery Banner">
          <img src="images/Banner2.jpg" alt="Truck Delivery Banner">
          <img src="images/Banner3.jpg" alt="Boy Receiving Parcel">
        </div>
      </div>
    </section>

    <div class="tools">
      <div class="search">
        <input type="text" placeholder="Search products..." />
      </div>
      <div class="filter">Filter</div>
    </div>

  </main>

  <footer class="footer">
    &copy; 2025 ONLINETRADERZ. All Rights Reserved.
    <br><br>
    <a href="mailto:farisdaar107@gmail.com" class="footer-email" target="_blank">
      <img src="https://cdn-icons-png.flaticon.com/512/561/561127.png" alt="Email Icon">
      farisdaar107@gmail.com
    </a>
  </footer>

  <!-- Floating WhatsApp Button -->
  <a href="https://wa.me/923444318078" class="whatsapp-float" target="_blank" aria-label="Chat on WhatsApp">
    <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="WhatsApp" />
  </a>

  <!-- Product Loader Script -->
  <script>
  const API_BASE = "https://cppbackened.onrender.com";

  async function loadProducts() {
    try {
      const res = await fetch(`${API_BASE}/api/products`);
      const products = await res.json();
      displayProducts(products);
    } catch (err) {
      console.error("Error loading products:", err);
    }
  }

  function displayProducts(products) {
    const grid = document.createElement("div");
    grid.className = "grid";
  
    products.forEach(p => {
      const card = document.createElement("div");
      card.className = "card";
      card.innerHTML = `
        <img src="${p.img}" alt="${p.title}">
        <h3>${p.title}</h3>
        <div class="meta">
          <div class="price">Rs.${p.price}</div>
          <div class="stock">${p.stock > 0 ? 'In Stock' : 'Out of Stock'}</div>
        </div>
        <div class="actions">
          <button class="btn btn-primary add-cart-btn">Add to Cart</button>
          <button class="btn btn-outline">View</button>
        </div>
      `;
      grid.appendChild(card);

      card.querySelector(".add-cart-btn").addEventListener("click", () => {
        addToCart(p);
      });
    });
  
    document.querySelector(".page").appendChild(grid);
  }

  loadProducts();
  </script>

  <!-- üõí Cart Sidebar -->
  <div class="cart-sidebar" id="cartSidebar">
    <div class="cart-header">
      <h3>Your Cart</h3>
      <button id="closeCart">‚úñ</button>
    </div>
    <div id="cartItems"></div>
    <div class="cart-footer">
      <p>Total: Rs.<span id="cartTotal">0</span></p>
      <button class="checkout-btn">Checkout</button>
    </div>
  </div>

  <!-- üõí Cart Management Script -->
  <script>
  let cart = JSON.parse(localStorage.getItem("cart")) || [];

  function updateCartCount() {
    document.querySelector(".cart-count").textContent = cart.length;
  }

  function saveCart() {
    localStorage.setItem("cart", JSON.stringify(cart));
    updateCartCount();
    renderCartItems();
  }

  function addToCart(product) {
    const existing = cart.find(item => item.id === product.id);
    if (existing) {
      existing.quantity += 1;
    } else {
      product.quantity = 1;
      cart.push(product);
    }
    saveCart();
    alert(`${product.title} added to cart!`);
  }

  function changeQuantity(index, delta) {
    cart[index].quantity += delta;
    if (cart[index].quantity <= 0) cart.splice(index, 1);
    saveCart();
  }

  function renderCartItems() {
    const cartContainer = document.getElementById("cartItems");
    const total = document.getElementById("cartTotal");
    cartContainer.innerHTML = "";
    let sum = 0;
    
    cart.forEach((item, i) => {
      const div = document.createElement("div");
      div.className = "cart-item";
      div.innerHTML = `
        <img src="${item.img}" alt="${item.title}">
        <div class="cart-item-details">
          <h4>${item.title}</h4>
          <p>Rs.${item.price}</p>
          <div class="qty-control">
            <button onclick="changeQuantity(${i}, -1)">‚ûñ</button>
            <span>${item.quantity}</span>
            <button onclick="changeQuantity(${i}, 1)">‚ûï</button>
          </div>
        </div>
        <button class="remove-btn" onclick="removeFromCart(${i})">üóëÔ∏è</button>
      `;
      cartContainer.appendChild(div);
      sum += item.price * item.quantity;
    });

    total.textContent = sum;
  }

  function removeFromCart(index) {
    cart.splice(index, 1);
    saveCart();
  }

  document.querySelector(".cart-btn").addEventListener("click", () => {
    document.getElementById("cartSidebar").classList.add("active");
  });

  document.getElementById("closeCart").addEventListener("click", () => {
    document.getElementById("cartSidebar").classList.remove("active");
  });

  // üßæ Checkout Form Modal
  document.querySelector(".checkout-btn").addEventListener("click", () => {
    const modal = document.createElement("div");
    modal.className = "checkout-modal";
    modal.innerHTML = `
      <div class="checkout-form">
        <h3>Complete Your Order</h3>
        <input type="text" id="custName" placeholder="Full Name" required>
        <input type="email" id="custEmail" placeholder="Email" required>
        <input type="text" id="custContact" placeholder="WhatsApp / Contact" required>
        <textarea id="custAddress" placeholder="Address" required></textarea>
        <button id="submitOrder">Submit Order</button>
      </div>
    `;
    document.body.appendChild(modal);

    document.getElementById("submitOrder").addEventListener("click", () => {
      const name = document.getElementById("custName").value.trim();
      const email = document.getElementById("custEmail").value.trim();
      const contact = document.getElementById("custContact").value.trim();
      const address = document.getElementById("custAddress").value.trim();
      if (!name || !email || !contact || !address) {
        alert("Please fill all details");
        return;
      }

      const orderId = "OZ" + Math.floor(100000 + Math.random() * 900000);
      const total = document.getElementById("cartTotal").textContent;
      modal.remove();

      const popup = document.createElement("div");
      popup.className = "thank-popup";
      popup.innerHTML = `
        <div class="thank-card">
          <h2>üéâ Thank You, ${name}!</h2>
          <p>Your order <b>#${orderId}</b> has been placed successfully.</p>
          <p>Total: Rs.${total}</p>
        </div>
      `;
      document.body.appendChild(popup);

      const msg = encodeURIComponent(
        `Hello ${name}! üëã Your order (${orderId}) has been placed successfully.\n\nTotal: Rs.${total}\nAddress: ${address}\nThank you for shopping at ONLINETRADERZ!`
      );
      window.open(`https://wa.me/${contact}?text=${msg}`, "_blank");

      setTimeout(() => {
        popup.remove();
        localStorage.removeItem("cart");
        window.location.href = "index.html";
      }, 5000);
    });
  });

  updateCartCount();
  renderCartItems();
  </script>

</body>   
</html>
